# This file has been auto-generated by i3-config-wizard(1).
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 12

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# quBSD: HIGHLY RECOMMEND. Opens xterm on host, or in jail, depending on active window
bindsym $mod+Return exec qb-cmd -n

# quBSD: HIGHLY RECOMMEND. Like above, but if active window is a jail, open xterm on host
bindsym $mod+Shift+Return exec xterm

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# quBSD - My personal preference is to map the i3 movement keys the same as vi
# quBSD - i3 defaults to j,k,l,; but vi uses h,k,l,; 
# change focus
bindsym $mod+j focus down 
bindsym $mod+k focus up 
bindsym $mod+l focus right 
bindsym $mod+h focus left 

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move down 
bindsym $mod+Shift+k move up  
bindsym $mod+Shift+l move right 
bindsym $mod+Shift+h move left 

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+Shift+v split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+d focus child

# Define names for default workspaces for which we configure key bindings later on.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# quBSD expansion of workspaces. These will be available with expanded modes later on. 
set $ws11 "11"
set $ws12 "12"
set $ws13 "13"
set $ws14 "14"
set $ws15 "15"
set $ws16 "16"
set $ws17 "17"
set $ws18 "18"
set $ws19 "19"
set $ws20 "20"

# switch to workspace
# quBSD: The default method of switching workspaces is maintained, but later expanded
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
# quBSD: The default method of moving containers is maintained, but later expanded
bindsym $mod+Shift+1 move container to workspace number $ws1, mode "default"
bindsym $mod+Shift+2 move container to workspace number $ws2, mode "default"
bindsym $mod+Shift+3 move container to workspace number $ws3, mode "default"
bindsym $mod+Shift+4 move container to workspace number $ws4, mode "default"
bindsym $mod+Shift+5 move container to workspace number $ws5, mode "default"
bindsym $mod+Shift+6 move container to workspace number $ws6, mode "default"
bindsym $mod+Shift+7 move container to workspace number $ws7, mode "default"
bindsym $mod+Shift+8 move container to workspace number $ws8, mode "default"
bindsym $mod+Shift+9 move container to workspace number $ws9, mode "default"
bindsym $mod+Shift+0 move container to workspace number $ws10, mode "default"

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

# quBSD: Again, the direction keys are changed from i3 defaults, to vi
# resize window (you can also use the mouse for that)
mode "resize" {
	# Pressing left will shrink the window’s width.
	# Pressing right will grow the window’s width.
	# Pressing up will shrink the window’s height.
	# Pressing down will grow the window’s height.
	bindsym j resize shrink height 150 px
	bindsym k resize grow height 150 px
	bindsym l resize grow width 150 px
	bindsym h resize shrink width 150 px
        
	# same bindings, but for the arrow keys
	bindsym Left resize shrink width 20 px
	bindsym Down resize grow height 20 px
	bindsym Up resize shrink height 20 px
	bindsym Right resize grow width 20 px

	# back to normal: Enter or Escape or $mod+r
	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
	output nonprimary
        status_command i3status -c /root/.config/i3status/config
	modifier $mod
}

# Use a screen locker 
exec --no-startup-id "xautolock -detectsleep -time 240 -corners 0-00 -locker 'i3lock -e -f -c 000000' -notify 15 -notifier \"notify-send -t 30000 'Locking screen in 30 seconds'\""

# quBSD: Lock the screen 
bindsym $mod+o exec "i3lock -e -f -c 000000"

# quBSD: Volume commands. Notice that "comma" and "period" correspond to: "<" and ">"
bindsym $mod+comma exec "mixer vol -10"
bindsym $mod+period exec "mixer vol +10"
bindsym $mod+shift+comma exec "mixer vol -50"
bindsym $mod+shift+period exec "mixer vol +50"

# quBSD: Floating Modifiers, which might be convenient for specific windows
# User might want to adjust their minimum size, and/or other programs
floating_minimum_size 1100 x 700
for_window [floating] move position center 
for_window [title="Spectacle"] floating enable
for_window [title="xmessage"] floating enable


# quBSD:  EXPANDED WORKSPACES AND COMMON COMMANDS
# Extra workspaces requires a couple extra modes to access them. 
# Also, the idea is for "quickselect" to contain most of your commonly used commands.

# "grave" is the tilde sign: "~".
bindsym $mod+grave mode "quickselect1"

mode "quickselect1" {
	# The tilde/grave will get you back/forth between quickselect1 and 2.
	bindsym grave mode "quickselect2"
	
	bindsym d exec qb-cmd dispjail falkon , mode "default"
	bindsym Shift+d exec qb-cmd dispjail firefox, mode "default"

	# Below are some examples of you how might map some keybindings for common jails
	bindsym shift+c exec qb-cmd corporate firefox, mode "default"
	bindsym e exec qb-cmd email firefox, mode "default"
	bindsym k exec qb-cmd vault keepassxc , mode "default"
	bindsym s exec qb-cmd social falkon, mode "default"
	bindsym Shift+s exec qb-cmd social firefox, mode "default"
	bindsym t exec qb-cmd message telegram-desktop, mode "default"
	bindsym v exec qb-cmd torrents vlc , mode "default"

	# Conventient for single hand switchin workspaces
	bindsym 1 workspace number $ws1, mode "default"
	bindsym 2 workspace number $ws2, mode "default"
	bindsym 3 workspace number $ws3, mode "default"
	bindsym 4 workspace number $ws4, mode "default"
	bindsym 5 workspace number $ws5, mode "default"
	bindsym 6 workspace number $ws6, mode "default"
	bindsym 7 workspace number $ws7, mode "default"
	bindsym 8 workspace number $ws8, mode "default"
	bindsym 9 workspace number $ws9, mode "default"
	bindsym 0 workspace number $ws10, mode "default"

	bindsym Shift+1 move container to workspace number $ws1, mode "default"
	bindsym Shift+2 move container to workspace number $ws2, mode "default"
	bindsym Shift+3 move container to workspace number $ws3, mode "default"
	bindsym Shift+4 move container to workspace number $ws4, mode "default"
	bindsym Shift+5 move container to workspace number $ws5, mode "default"
	bindsym Shift+6 move container to workspace number $ws6, mode "default"
	bindsym Shift+7 move container to workspace number $ws7, mode "default"
	bindsym Shift+8 move container to workspace number $ws8, mode "default"
	bindsym Shift+9 move container to workspace number $ws9, mode "default"
	bindsym Shift+0 move container to workspace number $ws10, mode "default"

	bindsym Return mode "default"
	bindsym Escape mode "default"

}

mode "quickselect2" {
	bindsym grave mode "quickselect1"

	bindsym 1 workspace number $ws11, mode "default"
	bindsym 2 workspace number $ws12, mode "default"
	bindsym 3 workspace number $ws13, mode "default"
	bindsym 4 workspace number $ws14, mode "default"
	bindsym 5 workspace number $ws15, mode "default"
	bindsym 6 workspace number $ws16, mode "default"
	bindsym 7 workspace number $ws17, mode "default"
	bindsym 8 workspace number $ws18, mode "default"
	bindsym 9 workspace number $ws19, mode "default"
	bindsym 0 workspace number $ws20, mode "default"

	bindsym Shift+1 move container to workspace number $ws11, mode "default"
	bindsym Shift+2 move container to workspace number $ws12, mode "default"
	bindsym Shift+3 move container to workspace number $ws13, mode "default"
	bindsym Shift+4 move container to workspace number $ws14, mode "default"
	bindsym Shift+5 move container to workspace number $ws15, mode "default"
	bindsym Shift+6 move container to workspace number $ws16, mode "default"
	bindsym Shift+7 move container to workspace number $ws17, mode "default"
	bindsym Shift+8 move container to workspace number $ws18, mode "default"
	bindsym Shift+9 move container to workspace number $ws19, mode "default"
	bindsym Shift+0 move container to workspace number $ws20, mode "default"

	bindsym Return mode "default"
	bindsym Escape mode "default"
}


##  AUTO GENERATED MODES FOR USERS WITH A CONTAINERIZED SYSTEM  ##
##  Edit i3gen.conf and run i3gen.sh to make changes  ##


##  FIRST LEVEL BINDING MODE  ##

bindsym $mod+m mode "manage"

mode "manage" {
	bindsym n mode "net"
	bindsym g mode "0gui-template"
	bindsym d mode "dispjail"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

##  SECOND LEVEL, GROUPED MODE KEYBINDINGS  ##

mode "net" {    
	bindsym v mode "net-vpn"
	bindsym f mode "net-firewall"
	bindsym t mode "net-tap"
	bindsym n mode "0net-template"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

##  VM KEYBINDINGS FOR EXEC COMMANDS  ##

mode "0net-template" {
	bindsym 0 exec qb-off 0net-template , mode "default"
	bindsym 1 exec jail -c 0net-template , mode "default"
	bindsym 2 exec qb-off -r 0net-template , mode "default"
	bindsym 3 exec qb-cmd -nr 0net-template  , mode "default"
	bindsym 5 exec qb-cmd 0net-template xterm , mode "default"
	bindsym 8 exec qb-flags -u 0net-template , mode "default"
	bindsym 9 exec qb-flags -d 0net-template , mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode "net-tap" {
	bindsym 0 exec qb-off net-tap , mode "default"
	bindsym 1 exec jail -c net-tap , mode "default"
	bindsym 2 exec qb-off -r net-tap , mode "default"
	bindsym 3 exec qb-cmd -nr net-tap  , mode "default"
	bindsym 5 exec qb-cmd net-tap xterm , mode "default"
	bindsym 8 exec qb-flags -u net-tap , mode "default"
	bindsym 9 exec qb-flags -d net-tap , mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode "net-firewall" {
	bindsym 0 exec qb-off net-firewall , mode "default"
	bindsym 1 exec jail -c net-firewall , mode "default"
	bindsym 2 exec qb-off -r net-firewall , mode "default"
	bindsym 3 exec qb-cmd -nr net-firewall  , mode "default"
	bindsym 5 exec qb-cmd net-firewall xterm , mode "default"
	bindsym 8 exec qb-flags -u net-firewall , mode "default"
	bindsym 9 exec qb-flags -d net-firewall , mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode "net-vpn" {
	bindsym 0 exec qb-off net-vpn , mode "default"
	bindsym 1 exec jail -c net-vpn , mode "default"
	bindsym 2 exec qb-off -r net-vpn , mode "default"
	bindsym 3 exec qb-cmd -nr net-vpn  , mode "default"
	bindsym 5 exec qb-cmd net-vpn xterm , mode "default"
	bindsym 8 exec qb-flags -u net-vpn , mode "default"
	bindsym 9 exec qb-flags -d net-vpn , mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode "0gui-template" {
	bindsym 0 exec qb-off 0gui-template , mode "default"
	bindsym 1 exec jail -c 0gui-template , mode "default"
	bindsym 2 exec qb-off -r 0gui-template , mode "default"
	bindsym 3 exec qb-cmd -nr 0gui-template  , mode "default"
	bindsym 5 exec qb-cmd 0gui-template xterm , mode "default"
	bindsym 4 exec qb-floatcmd 0gui-template , mode "default"
	bindsym 6 exec qb-disp 0gui-template , mode "default"
	bindsym 7 exec qb-cmd 0gui-template pcmanfm  , mode "default"
	bindsym 8 exec qb-flags -u 0gui-template , mode "default"
	bindsym 9 exec qb-flags -d 0gui-template , mode "default"
	bindsym f exec qb-cmd 0gui-template falkon , mode "default"
	bindsym shift+f exec qb-cmd 0gui-template firefox , mode "default"
	bindsym o exec qb-cmd 0gui-template libreoffice  , mode "default"
	bindsym g exec qb-cmd 0gui-template gwenview , mode "default"
	bindsym v exec qb-cmd 0gui-template vlc  , mode "default"
	bindsym s exec qb-cmd 0gui-template spectacle , mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode "dispjail" {
	bindsym 0 exec qb-off dispjail , mode "default"
	bindsym 1 exec jail -c dispjail , mode "default"
	bindsym 2 exec qb-off -r dispjail , mode "default"
	bindsym 3 exec qb-cmd -nr dispjail  , mode "default"
	bindsym 5 exec qb-cmd dispjail xterm , mode "default"
	bindsym 4 exec qb-floatcmd dispjail , mode "default"
	bindsym 6 exec qb-disp dispjail , mode "default"
	bindsym 7 exec qb-cmd dispjail pcmanfm  , mode "default"
	bindsym 8 exec qb-flags -u dispjail , mode "default"
	bindsym 9 exec qb-flags -d dispjail , mode "default"
	bindsym f exec qb-cmd dispjail falkon , mode "default"
	bindsym shift+f exec qb-cmd dispjail firefox , mode "default"
	bindsym o exec qb-cmd dispjail libreoffice  , mode "default"
	bindsym g exec qb-cmd dispjail gwenview , mode "default"
	bindsym v exec qb-cmd dispjail vlc  , mode "default"
	bindsym s exec qb-cmd dispjail spectacle , mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

